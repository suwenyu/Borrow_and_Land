<html ng-app="countryApp">
  <head>
    <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>租&借</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.10/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.10/angular-route.min.js"></script>
    	<!-- Google Webfont -->
  	<link href='https://fonts.googleapis.com/css?family=PT+Mono' rel='stylesheet' type='text/css'>
  	<!-- Themify Icons -->
  	<link rel="stylesheet" href="css/themify-icons.css">
  	<!-- Icomoon Icons -->
  	<link rel="stylesheet" href="css/icomoon-icons.css">
  	<!-- Bootstrap -->
  	<link rel="stylesheet" href="css/bootstrap.css">
  	<!-- Owl Carousel -->
  	<link rel="stylesheet" href="css/owl.carousel.min.css">
  	<link rel="stylesheet" href="css/owl.theme.default.min.css">
  	<!-- Magnific Popup -->
  	<link rel="stylesheet" href="css/magnific-popup.css">
  	<!-- Easy Responsive Tabs -->
  	<link rel="stylesheet" href="css/easy-responsive-tabs.css">
  	<!-- Theme Style -->
  	<link rel="stylesheet" href="css/style.css">
  	<link href="css/ihover.css" rel="stylesheet">
  	
    <link data-require="bootstrap-css@3.0.0" data-semver="3.0.0" rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://yandex.st/highlightjs/7.3/styles/zenburn.min.css" />
    <script src="https://yandex.st/highlightjs/7.3/highlight.min.js"></script>
    <script data-require="angular.js@1.4.x" src="https://code.angularjs.org/1.4.3/angular.min.js" data-semver="1.4.3"></script>
    <script src="https://pc035860.github.io/angular-highlightjs/angular-highlightjs.min.js"></script>
    <script src="https://pc035860.github.io/angular-easyfb/angular-easyfb.min.js"></script>
    <!-- <script src="app.js"></script> -->

  
  <style>	
	.carousel-inner > .item > img,
	.carousel-inner > .item > a > img {
	  margin: auto;
	  width:460px;
	  height: 400px;
	}
	.carousel-indicators li {
	    background-color: #555555;
	}
	.carousel-indicators .active {
	    background-color: #000000;
	}
	</style>

    <script>
      var countryApp = angular.module('countryApp', ['ngRoute','ezfb', 'hljs']);

      .config(function (ezfbProvider) {
        /**
         * Basic setup
         *
         * https://github.com/pc035860/angular-easyfb#configuration
         */
        ezfbProvider.setInitParams({
          appId: '1586848154899930'
        });  
      })

      .controller('MainCtrl', function($scope, ezfb, $window, $location, $q) {
  
  updateMe();
  
  updateLoginStatus()
  .then(updateApiCall);

  /**
   * Subscribe to 'auth.statusChange' event to response to login/logout
   */
  ezfb.Event.subscribe('auth.statusChange', function (statusRes) {
    $scope.loginStatus = statusRes;

    updateMe();
    updateApiCall();
  });

  $scope.login = function () {
    /**
     * Calling FB.login with required permissions specified
     * https://developers.facebook.com/docs/reference/javascript/FB.login/v2.0
     */
    ezfb.login(null, {scope: 'email,user_likes'});

    /**
     * In the case you need to use the callback
     *
     * ezfb.login(function (res) {
     *   // Executes 1
     * }, {scope: 'email,user_likes'})
     * .then(function (res) {
     *   // Executes 2
     * })
     *
     * Note that the `res` result is shared.
     * Changing the `res` in 1 will also change the one in 2
     */
  };

  $scope.logout = function () {
    /**
     * Calling FB.logout
     * https://developers.facebook.com/docs/reference/javascript/FB.logout
     */
    ezfb.logout();

    /**
     * In the case you need to use the callback
     *
     * ezfb.logout(function (res) {
     *   // Executes 1
     * })
     * .then(function (res) {
     *   // Executes 2
     * })
     */
  };

  $scope.share = function () {
    var no = 1,
        callback = function (res) {
          console.log('FB.ui callback execution', no++);
          console.log('response:', res);
        };

    ezfb.ui(
      {
        method: 'feed',
        name: 'angular-easyfb API demo',
        picture: 'http://plnkr.co/img/plunker.png',
        link: 'http://plnkr.co/edit/qclqht?p=preview',
        description: 'angular-easyfb is an AngularJS module wrapping Facebook SDK.' + 
                     ' Facebook integration in AngularJS made easy!' + 
                     ' Please try it and feel free to give feedbacks.'
      },
      callback
    )
    .then(callback);
  };

  /**
   * For generating better looking JSON results
   */
  var autoToJSON = ['loginStatus', 'apiRes']; 
  angular.forEach(autoToJSON, function (varName) {
    $scope.$watch(varName, function (val) {
      $scope[varName + 'JSON'] = JSON.stringify(val, null, 2);
    }, true);
  });
  
  /**
   * Update api('/me') result
   */
  function updateMe () {
      ezfb.getLoginStatus()
      .then(function (res) {
        // res: FB.getLoginStatus response
        // https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus
        return ezfb.api('/me');
      })
      .then(function (me) {
        // me: FB.api('/me') response
        // https://developers.facebook.com/docs/javascript/reference/FB.api
        $scope.me = me;
      });
    }
    
    /**
     * Update loginStatus result
     */
    function updateLoginStatus () {
      return ezfb.getLoginStatus()
        .then(function (res) {
          // res: FB.getLoginStatus response
          // https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus
          $scope.loginStatus = res;
        });
    }

    /**
     * Update demostration api calls result
     */
    function updateApiCall () {
      return $q.all([
          ezfb.api('/me'),
          ezfb.api('/me/likes')
        ])
        .then(function (resList) {
          // Runs after both api calls are done
          // resList[0]: FB.api('/me') response
          // resList[1]: FB.api('/me/likes') response
          $scope.apiRes = resList;
        });

    }
  });

      countryApp.config(function($routeProvider) {
        $routeProvider.
          when('/' ,{
            templateUrl: 'home.html',
            contoller : 'HomeCtrl'
          }).
          when('/fbtest' ,{
            templateUrl: 'testfb.html',
            contoller : 'TestFBCtrl'
          }).
          when('/post' ,{
            templateUrl: 'post.html',
            contoller : 'PostCtrl'
          }).
          when('/login' ,{
            templateUrl: 'login.html',
            contoller : 'LoginCtrl'
          }).
          when('/list', {
            templateUrl: 'country-list.html',
            controller: 'CountryListCtrl'
          }).
          when('/:countryName', {
            templateUrl: 'country-detail.html',
            controller: 'CountryDetailCtrl'
          }).
          otherwise({
            redirectTo: '/'
          });
      });

      countryApp.factory('countries', function($http){
        return {
          list: function(callback){
            $http.get('https://suwenyu.github.io/Borrow_and_Lend/product.json').success(callback);
          }
        };
      });
      
      countryApp.controller('HomeCtrl', function ($scope, countries){
        countries.list(function(countries) {
          $scope.countries = countries;
        });
      });
      
      countryApp.controller('PostCrtl' , function($scope, countries) {
      });
      countryApp.controller('LoginCtrl' , function($scope, countries) {
      });
      
      countryApp.controller('CountryListCtrl', function ($scope, countries){
        countries.list(function(countries) {
          $scope.countries = countries;
        });
      });
      
      

      countryApp.controller('CountryDetailCtrl', function ($scope, $routeParams, $http){
        $http.get('https://suwenyu.github.io/Borrow_and_Lend/product.json').success(function(data) {
          $scope.country = data.filter(function(entry){
            return entry.name === $routeParams.countryName
          })[0];
        });
      });

    </script>
  </head>
  <body>
    
    <!-- Header -->
		<header id="fh5co-header" role="banner">
			<div class="container">
				<!-- Logo -->
				<div id="fh5co-logo">
					<a href="#/">
						<img src="images/logo1.png" alt="Work Logo">
					</a>

				</div>
				<!-- Logo -->
				
				<!-- Mobile Toggle Menu Button -->
				<a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
				
				<!-- Main Nav -->
				<div id="fh5co-main-nav">
					<nav id="fh5co-nav" role="navigation">
						<ul>
							<li>
								<a href="#/">首頁</a>
							</li>
							<li>
								<a href="#/list">出租列表</a>
							</li>
							<li>
								<a href="#/post">張貼出租</a>
							</li>
						</ul>
						<a href="#/login" id="myBtn" class="fh5co-nav-call-to-action js-fh5co-nav-call-to-action">LogIn</a>
					</nav>
				</div>
				<!-- Main Nav -->
			</div>
		</header>
		<!-- Header -->
      
    <div ng-view></div>
				
		<footer id="fh5co-footer" role="contentinfo">
			<div class="container">
				<div class="row">
					<div class="col-md-push-6 col-md-6">
						<ul class="fh5co-footer-social">
							<li><a href="#">Twitter</a></li>
							<li><a href="#">Facebook</a></li>
							<li><a href="#">Tumblr</a></li>
							<li><a href="#">Instagram</a></li>
						</ul>
						<p>We’d love to chat about your business, send us an <a href="mailto:info@freehtml5.co" target="_blank">email</a>.</p>
					</div>
				</div>
			</div>
		</footer>
		
		<a href="#" class="fh5co-gotop"><i class="ti-shift-left"></i></a>
			
		<!-- jQuery -->
		<script src="js/jquery-1.10.2.min.js"></script>
		<!-- jQuery Easing -->
		<script src="js/jquery.easing.1.3.js"></script>
		<!-- Bootstrap -->
		<script src="js/bootstrap.js"></script>
		<!-- Owl carousel -->
		<script src="js/owl.carousel.min.js"></script>
		<!-- Magnific Popup -->
		<script src="js/jquery.magnific-popup.min.js"></script>
		<!-- Easy Responsive Tabs -->
		<script src="js/easyResponsiveTabs.js"></script>
		<!-- FastClick for Mobile/Tablets -->
		<script src="js/fastclick.js"></script>
		<!-- Velocity -->
		<script src="js/velocity.min.js"></script>
		<!-- Google Map -->
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCefOgb1ZWqYtj7raVSmN4PL2WkTrc-KyA&sensor=false"></script>
		<script src="js/google_map.js"></script>
		<!-- Main JS -->
		<script src="js/main.js"></script>


<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v2.6&appId=955033104561849";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>
  </body>
</html>